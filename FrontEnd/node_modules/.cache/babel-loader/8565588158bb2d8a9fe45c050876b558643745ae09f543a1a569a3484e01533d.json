{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/khali/OneDrive/Desktop/WebApplication_project-main/FrontEnd/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/khali/OneDrive/Desktop/WebApplication_project-main/FrontEnd/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport { required } from \"vuelidate/lib/validators\";\nexport default {\n  name: \"Login\",\n  data: function data() {\n    return {\n      form: {\n        username: \"\",\n        password: \"\",\n        submitError: undefined\n      }\n    };\n  },\n  validations: {\n    form: {\n      username: {\n        required: required\n      },\n      password: {\n        required: required\n      }\n    }\n  },\n  methods: {\n    validateState: function validateState(param) {\n      var _this$$v$form$param = this.$v.form[param],\n        $dirty = _this$$v$form$param.$dirty,\n        $error = _this$$v$form$param.$error;\n      return $dirty ? !$error : null;\n    },\n    Login: function Login() {\n      var _this = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var apiEndpoint, response;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              console.log('Attempting login');\n              // Construct the API endpoint\n              apiEndpoint = _this.$root.store.server_domain ? \"\".concat(_this.$root.store.server_domain, \"/Login\") : \"http://127.0.0.1:80/Login\"; // Send the login request\n              _context.next = 5;\n              return _this.axios.post(apiEndpoint, {\n                username: _this.form.username,\n                password: _this.form.password\n              });\n            case 5:\n              response = _context.sent;\n              console.log('Login successful', response.data);\n\n              // Call the login method from your store and navigate to home\n              _this.$root.store.login(_this.form.username);\n              _this.$router.push(\"/\");\n              _context.next = 15;\n              break;\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](0);\n              console.error('Login error', _context.t0);\n\n              // Handle response errors\n              if (_context.t0.response && _context.t0.response.data && _context.t0.response.data.message) {\n                _this.form.submitError = _context.t0.response.data.message;\n              } else {\n                _this.form.submitError = \"An unexpected error occurred. Please try again.\";\n              }\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[0, 11]]);\n      }))();\n    },\n    onLogin: function onLogin() {\n      this.form.submitError = undefined;\n      this.$v.form.$touch();\n      if (this.$v.form.$anyError) {\n        return;\n      }\n      this.Login();\n    }\n  }\n};","map":{"version":3,"names":["required","name","data","form","username","password","submitError","undefined","validations","methods","validateState","param","_this$$v$form$param","$v","$dirty","$error","Login","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","apiEndpoint","response","wrap","_callee$","_context","prev","next","console","log","$root","store","server_domain","concat","axios","post","sent","login","$router","push","t0","error","message","stop","onLogin","$touch","$anyError"],"sources":["src/pages/LoginPage.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <h1 class=\"title\">Login</h1>\n    <b-form @submit.prevent=\"onLogin\">\n      <b-form-group\n        id=\"input-group-Username\"\n        label-cols-sm=\"3\"\n        label=\"Username:\"\n        label-for=\"Username\"\n      >\n        <b-form-input\n          id=\"Username\"\n          v-model=\"$v.form.username.$model\"\n          type=\"text\"\n          :state=\"validateState('username')\"\n        ></b-form-input>\n        <b-form-invalid-feedback>\n          Username is required\n        </b-form-invalid-feedback>\n      </b-form-group>\n\n      <b-form-group\n        id=\"input-group-Password\"\n        label-cols-sm=\"3\"\n        label=\"Password:\"\n        label-for=\"Password\"\n      >\n        <b-form-input\n          id=\"Password\"\n          type=\"password\"\n          v-model=\"$v.form.password.$model\"\n          :state=\"validateState('password')\"\n        ></b-form-input>\n        <b-form-invalid-feedback>\n          Password is required\n        </b-form-invalid-feedback>\n      </b-form-group>\n\n      <b-button\n        type=\"submit\"\n        variant=\"primary\"\n        style=\"width:100px;display:block;\"\n        class=\"mx-auto w-100\"\n        >Login</b-button\n      >\n      <div class=\"mt-2\">\n        Do not have an account yet?\n        <router-link to=\"register\"> Register in here</router-link>\n      </div>\n    </b-form>\n    <b-alert\n      class=\"mt-2\"\n      v-if=\"form.submitError\"\n      variant=\"warning\"\n      dismissible\n      show\n    >\n      Login failed: {{ form.submitError }}\n    </b-alert>\n    <!-- <b-card class=\"mt-3\" header=\"Form Data Result\">\n      <pre class=\"m-0\">{{ form }}</pre>\n    </b-card> -->\n  </div>\n</template>\n\n<script>\nimport { required } from \"vuelidate/lib/validators\";\nexport default {\n  name: \"Login\",\n  data() {\n    return {\n      form: {\n        username: \"\",\n        password: \"\",\n        submitError: undefined\n      }\n    };\n  },\n  validations: {\n    form: {\n      username: {\n        required\n      },\n      password: {\n        required\n      }\n    }\n  },\n  methods: {\n    validateState(param) {\n      const { $dirty, $error } = this.$v.form[param];\n      return $dirty ? !$error : null;\n    },\n    async Login() {\n      try {\n        console.log('Attempting login');\n        // Construct the API endpoint\n        const apiEndpoint = this.$root.store.server_domain \n          ? `${this.$root.store.server_domain}/Login` \n          : \"http://127.0.0.1:80/Login\";\n\n        // Send the login request\n        const response = await this.axios.post(apiEndpoint, {\n          username: this.form.username,\n          password: this.form.password\n        });\n\n        console.log('Login successful', response.data);\n\n        // Call the login method from your store and navigate to home\n        this.$root.store.login(this.form.username);\n        this.$router.push(\"/\");\n      } catch (err) {\n        console.error('Login error', err);\n        \n        // Handle response errors\n        if (err.response && err.response.data && err.response.data.message) {\n          this.form.submitError = err.response.data.message;\n        } else {\n          this.form.submitError = \"An unexpected error occurred. Please try again.\";\n        }\n      }\n    },\n    onLogin() {\n      this.form.submitError = undefined;\n      this.$v.form.$touch();\n      if (this.$v.form.$anyError) {\n        return;\n      }\n      this.Login();\n    }\n  }\n};\n</script>\n<style lang=\"scss\" scoped>\n.container {\n  max-width: 400px;\n  padding-top:20px;\n  margin-top: auto;\n}\n\n</style>\n"],"mappings":";;;AAkEA,SAAAA,QAAA;AACA;EACAC,IAAA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,IAAA;QACAC,QAAA;QACAC,QAAA;QACAC,WAAA,EAAAC;MACA;IACA;EACA;EACAC,WAAA;IACAL,IAAA;MACAC,QAAA;QACAJ,QAAA,EAAAA;MACA;MACAK,QAAA;QACAL,QAAA,EAAAA;MACA;IACA;EACA;EACAS,OAAA;IACAC,aAAA,WAAAA,cAAAC,KAAA;MACA,IAAAC,mBAAA,QAAAC,EAAA,CAAAV,IAAA,CAAAQ,KAAA;QAAAG,MAAA,GAAAF,mBAAA,CAAAE,MAAA;QAAAC,MAAA,GAAAH,mBAAA,CAAAG,MAAA;MACA,OAAAD,MAAA,IAAAC,MAAA;IACA;IACAC,KAAA,WAAAA,MAAA;MAAA,IAAAC,KAAA;MAAA,OAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,UAAAC,QAAA;QAAA,IAAAC,WAAA,EAAAC,QAAA;QAAA,OAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cAAAF,QAAA,CAAAC,IAAA;cAEAE,OAAA,CAAAC,GAAA;cACA;cACAR,WAAA,GAAAL,KAAA,CAAAc,KAAA,CAAAC,KAAA,CAAAC,aAAA,MAAAC,MAAA,CACAjB,KAAA,CAAAc,KAAA,CAAAC,KAAA,CAAAC,aAAA,cACA,6BAEA;cAAAP,QAAA,CAAAE,IAAA;cAAA,OACAX,KAAA,CAAAkB,KAAA,CAAAC,IAAA,CAAAd,WAAA;gBACAlB,QAAA,EAAAa,KAAA,CAAAd,IAAA,CAAAC,QAAA;gBACAC,QAAA,EAAAY,KAAA,CAAAd,IAAA,CAAAE;cACA;YAAA;cAHAkB,QAAA,GAAAG,QAAA,CAAAW,IAAA;cAKAR,OAAA,CAAAC,GAAA,qBAAAP,QAAA,CAAArB,IAAA;;cAEA;cACAe,KAAA,CAAAc,KAAA,CAAAC,KAAA,CAAAM,KAAA,CAAArB,KAAA,CAAAd,IAAA,CAAAC,QAAA;cACAa,KAAA,CAAAsB,OAAA,CAAAC,IAAA;cAAAd,QAAA,CAAAE,IAAA;cAAA;YAAA;cAAAF,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAe,EAAA,GAAAf,QAAA;cAEAG,OAAA,CAAAa,KAAA,gBAAAhB,QAAA,CAAAe,EAAA;;cAEA;cACA,IAAAf,QAAA,CAAAe,EAAA,CAAAlB,QAAA,IAAAG,QAAA,CAAAe,EAAA,CAAAlB,QAAA,CAAArB,IAAA,IAAAwB,QAAA,CAAAe,EAAA,CAAAlB,QAAA,CAAArB,IAAA,CAAAyC,OAAA;gBACA1B,KAAA,CAAAd,IAAA,CAAAG,WAAA,GAAAoB,QAAA,CAAAe,EAAA,CAAAlB,QAAA,CAAArB,IAAA,CAAAyC,OAAA;cACA;gBACA1B,KAAA,CAAAd,IAAA,CAAAG,WAAA;cACA;YAAA;YAAA;cAAA,OAAAoB,QAAA,CAAAkB,IAAA;UAAA;QAAA,GAAAvB,OAAA;MAAA;IAEA;IACAwB,OAAA,WAAAA,QAAA;MACA,KAAA1C,IAAA,CAAAG,WAAA,GAAAC,SAAA;MACA,KAAAM,EAAA,CAAAV,IAAA,CAAA2C,MAAA;MACA,SAAAjC,EAAA,CAAAV,IAAA,CAAA4C,SAAA;QACA;MACA;MACA,KAAA/B,KAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}